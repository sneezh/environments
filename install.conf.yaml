- defaults:
    link:
      relink: true

- clean: ['~']

- create:
    - ~/.config

- link:
    ~/.gitignore_global: dotfiles/.gitignore_global
    ~/.gitconfig: dotfiles/.gitconfig
    ~/.vimrc: dotfiles/.vimrc
    ~/.config/nvim: dotfiles/nvim
    ~/.config/fish: dotfiles/fish

- shell:
    - [git submodule update --init --recursive, Installing submodules]
    - [sh ./install-apt-stuff.sh, Installing essential utils using apt]
    - command: sh ./run-ansible.sh
      stdin: true
      stdout: true
      description: Poring software
    - curl https://raw.githubusercontent.com/oh-my-fish/oh-my-fish/master/bin/install > /tmp/omf-install && chmod +x /tmp/omf-install
    - fish /tmp/omf-install --noninteractive && rm /tmp/omf-install
    - nvim -c "PlugInstall"
    - bash -c 'echo /usr/local/bin/fish >> /etc/shells'
    - chsh -s /usr/local/bin/fish
